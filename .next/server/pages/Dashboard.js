"use strict";(()=>{var a={};a.id=28,a.ids=[28,220],a.modules={6516:a=>{a.exports=require("react-smooth")},8732:a=>{a.exports=require("react/jsx-runtime")},8921:a=>{a.exports=require("lodash/maxBy")},9888:a=>{a.exports=require("lodash/first")},9948:a=>{a.exports=require("lodash/upperFirst")},11570:a=>{a.exports=require("lodash/isBoolean")},13261:a=>{a.exports=require("victory-vendor/d3-shape")},14014:a=>{a.exports=require("lodash/isFunction")},16490:a=>{a.exports=require("lodash/mapValues")},18725:a=>{a.exports=require("lodash/every")},18782:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{at:()=>j});var e=c(8732),f=c(82015),g=c(19027),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.createContext({config:{}}),j=f.forwardRef(({id:a,className:b,children:c,config:d={},...h},j)=>{let k=f.useId(),l=`chart-${a||k.replace(/:/g,"")}`;return(0,e.jsx)(i.Provider,{value:{config:d},children:(0,e.jsx)("div",{"data-chart":l,ref:j,dir:"rtl",className:(0,g.cn)("flex aspect-video justify-center rounded-xl border bg-card/50 p-3 text-xs","[&_.recharts-surface]:outline-none [&_.recharts-sector]:outline-none [&_.recharts-curve]:outline-none",b),...h,children:c})})});j.displayName="ChartContainer",d()}catch(a){d(a)}})},19027:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},26703:a=>{a.exports=require("lodash/sortBy")},28395:a=>{a.exports=require("lodash/range")},28648:a=>{a.exports=require("lodash/max")},33873:a=>{a.exports=require("path")},34562:a=>{a.exports=require("react-is")},35503:a=>{a.exports=require("recharts-scale")},39315:a=>{a.exports=require("lodash/isNaN")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},44184:a=>{a.exports=require("lodash/sumBy")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},48783:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(625),k=c.n(j),l=c(76684),m=c(12289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/Dashboard",pathname:"/Dashboard",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/Dashboard",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},49673:a=>{a.exports=require("lodash/flatMap")},50802:a=>{a.exports=import("clsx")},51343:a=>{a.exports=require("eventemitter3")},51999:a=>{a.exports=require("lodash/isString")},60133:a=>{a.exports=require("lodash/find")},60601:a=>{a.exports=require("lodash/isObject")},62546:a=>{a.exports=require("victory-vendor/d3-scale")},64813:a=>{a.exports=require("lodash/isPlainObject")},66568:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BT:()=>l,Wu:()=>m,ZB:()=>k,Zp:()=>i,aR:()=>j});var e=c(8732),f=c(82015),g=c(19027),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("rounded-xl border border-border/40 bg-card/75 backdrop-blur-md text-card-foreground shadow-lg dark:bg-card/50 dark:border-border/30",a),...b}));i.displayName="Card";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",a),...b}));j.displayName="CardHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("h3",{ref:c,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));k.displayName="CardTitle";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("p",{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));l.displayName="CardDescription";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("p-6 pt-0",a),...b}));m.displayName="CardContent",f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter",d()}catch(a){d(a)}})},66770:a=>{a.exports=require("lodash/throttle")},69826:a=>{a.exports=require("lodash/memoize")},71247:a=>{a.exports=require("lodash/isNumber")},74956:a=>{a.exports=require("clsx")},75979:a=>{a.exports=import("tailwind-merge")},76684:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>m});var e=c(8732),f=c(82015);!function(){var a=Error("Cannot find module '@/contexts/AuthContext'");throw a.code="MODULE_NOT_FOUND",a}(),function(){var a=Error("Cannot find module '@/contexts/DataContext'");throw a.code="MODULE_NOT_FOUND",a}();var g=c(66568),h=c(74952),i=c(90029),j=c(18782);!function(){var a=Error("Cannot find module '@/components/Layout'");throw a.code="MODULE_NOT_FOUND",a}();var k=c(19027),l=a([g,j,k]);[g,j,k]=l.then?(await l)():l;let m=()=>{let{user:a}=Object(function(){var a=Error("Cannot find module '@/contexts/AuthContext'");throw a.code="MODULE_NOT_FOUND",a}())(),{bookings:b,services:c,users:d,reviews:l,vehicles:m}=Object(function(){var a=Error("Cannot find module '@/contexts/DataContext'");throw a.code="MODULE_NOT_FOUND",a}())(),n=b.length,o=b.filter(a=>"completed"===a.status).length,p=b.filter(a=>"completed"===a.status).reduce((a,b)=>a+b.price,0),q=l.length>0?l.reduce((a,b)=>a+b.rating,0)/l.length:0,r=b.filter(b=>a?.role==="customer"?b.customerId===a.id:b.providerId===a.id),s=r.filter(a=>"completed"===a.status).reduce((a,b)=>a+b.price,0),t=l.filter(b=>a?.role==="provider"?b.providerId===a.id:b.customerId===a.id),u=(0,f.useMemo)(()=>[{name:"در انتظار",value:b.filter(a=>"pending"===a.status).length,fill:"hsl(var(--warning))"},{name:"تأیید شده",value:b.filter(a=>"confirmed"===a.status).length,fill:"hsl(var(--primary))"},{name:"در حال انجام",value:b.filter(a=>"in-progress"===a.status).length,fill:"hsl(var(--secondary))"},{name:"انجام شده",value:b.filter(a=>"completed"===a.status).length,fill:"hsl(var(--success))"},{name:"لغو شده",value:b.filter(a=>"cancelled"===a.status).length,fill:"hsl(var(--destructive))"}],[b]),v=(0,f.useMemo)(()=>[{month:"فروردین",bookings:12,revenue:15e6},{month:"اردیبهشت",bookings:15,revenue:185e5},{month:"خرداد",bookings:18,revenue:22e6},{month:"تیر",bookings:22,revenue:28e6},{month:"مرداد",bookings:25,revenue:32e6},{month:"شهریور",bookings:20,revenue:26e6}],[]),w=(0,f.useMemo)(()=>c.map(a=>({name:a.name,count:b.filter(b=>b.serviceId===a.id).length})).sort((a,b)=>b.count-a.count).slice(0,5),[b,c]),x=({active:a,payload:b,label:c})=>a&&b&&b.length?(0,e.jsxs)("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:[(0,e.jsx)("p",{className:"font-medium",children:c}),b.map(a=>(0,e.jsx)("p",{style:{color:a.color},children:`${a.name}: ${(0,k.formatNumber)(a.value)}`},a.dataKey))]}):null;return(0,e.jsx)(Object(function(){var a=Error("Cannot find module '@/components/Layout'");throw a.code="MODULE_NOT_FOUND",a}()),{children:(0,e.jsxs)("div",{className:"space-y-8",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("h1",{className:"text-3xl font-bold font-display text-balance",children:["خوش آمدید، ",a?.fullName]}),(0,e.jsxs)("p",{className:"text-muted-foreground mt-2",children:["خلاصه‌ای از فعالیت‌های ",a?.role==="admin"?"پلتفرم":"شما"]})]}),(0,e.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,e.jsxs)(g.Zp,{className:"transition hover:-translate-y-0.5 hover:shadow-lg shadow-card transition-all hover:scale-[1.02] hover:shadow-primary",children:[(0,e.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(g.ZB,{className:"text-sm font-medium",children:a?.role==="admin"?"کل رزروها":"رزروهای من"}),(0,e.jsx)(h.VvS,{className:"h-5 w-5 text-primary"})]}),(0,e.jsxs)(g.Wu,{children:[(0,e.jsx)("div",{className:"text-3xl font-bold gradient-primary bg-clip-text text-transparent",children:(0,k.formatNumber)(a?.role==="admin"?n:r.length)}),(0,e.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[(0,k.formatNumber)(o)," رزرو انجام شده"]})]})]}),(0,e.jsxs)(g.Zp,{className:"transition hover:-translate-y-0.5 hover:shadow-lg shadow-card transition-all hover:scale-[1.02] hover:shadow-primary",children:[(0,e.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(g.ZB,{className:"text-sm font-medium",children:"درآمد کل"}),(0,e.jsx)(h.G9t,{className:"h-5 w-5 text-success"})]}),(0,e.jsxs)(g.Wu,{children:[(0,e.jsxs)("div",{className:"text-3xl font-bold text-success",children:[(0,k.formatMillions)(a?.role==="admin"?p:s)," م"]}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"تومان"})]})]}),(0,e.jsxs)(g.Zp,{className:"transition hover:-translate-y-0.5 hover:shadow-lg shadow-card transition-all hover:scale-[1.02] hover:shadow-primary",children:[(0,e.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(g.ZB,{className:"text-sm font-medium",children:a?.role==="admin"?"کاربران":a?.role==="customer"?"خودروهای من":"مشتریان"}),a?.role==="customer"?(0,e.jsx)(h.THT,{className:"h-5 w-5 text-secondary"}):(0,e.jsx)(h.zWC,{className:"h-5 w-5 text-secondary"})]}),(0,e.jsxs)(g.Wu,{children:[(0,e.jsx)("div",{className:"text-3xl font-bold text-secondary",children:(0,k.formatNumber)(a?.role==="admin"?d.length:a?.role==="customer"?m.filter(b=>b.ownerId===a.id).length:b.filter(b=>b.providerId===a?.id&&"completed"===b.status).length)}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a?.role==="admin"?"کاربر فعال":a?.role==="customer"?"خودرو":"مشتری راضی"})]})]}),(0,e.jsxs)(g.Zp,{className:"transition hover:-translate-y-0.5 hover:shadow-lg shadow-card transition-all hover:scale-[1.02] hover:shadow-primary",children:[(0,e.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(g.ZB,{className:"text-sm font-medium",children:"میانگین امتیاز"}),(0,e.jsx)(h.FEq,{className:"h-5 w-5 text-warning"})]}),(0,e.jsxs)(g.Wu,{children:[(0,e.jsxs)("div",{className:"text-3xl font-bold text-warning flex items-center gap-1",children:[(0,k.formatNumber)(q,{maximumFractionDigits:1,minimumFractionDigits:1}),(0,e.jsx)(h.FEq,{className:"h-6 w-6 fill-warning"})]}),(0,e.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["از ",(0,k.formatNumber)(a?.role==="admin"?l.length:t.length)," نظر"]})]})]})]}),(0,e.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,e.jsxs)(g.Zp,{className:"transition hover:-translate-y-0.5 hover:shadow-lg shadow-card",children:[(0,e.jsx)(g.aR,{children:(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(h.ntg,{className:"h-5 w-5 text-primary","aria-hidden":!0}),"روند رزروها"]})}),(0,e.jsx)(g.Wu,{children:(0,e.jsx)(j.at,{children:(0,e.jsx)(i.uf,{width:"100%",height:300,children:(0,e.jsxs)(i.QF,{margin:{right:24,left:8,top:8,bottom:0},data:v,children:[(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,e.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.8}),(0,e.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),(0,e.jsx)(i.dC,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),(0,e.jsx)(i.WX,{tick:{textAnchor:"end",fill:"hsl(var(--muted-foreground))"},dataKey:"month",axisLine:!1,tickLine:!1}),(0,e.jsx)(i.h8,{tick:{textAnchor:"end",fill:"hsl(var(--muted-foreground))"},tickFormatter:a=>(0,k.formatNumber)(a),axisLine:!1,tickLine:!1}),(0,e.jsx)(i.m_,{content:(0,e.jsx)(x,{})}),(0,e.jsx)(i.Gk,{type:"monotone",dataKey:"bookings",stroke:"hsl(var(--primary))",fill:"url(#colorRevenue)",strokeWidth:2,name:"تعداد رزرو"})]})})})})]}),(0,e.jsxs)(g.Zp,{className:"transition hover:-translate-y-0.5 hover:shadow-lg shadow-card",children:[(0,e.jsx)(g.aR,{children:(0,e.jsx)(g.ZB,{children:"وضعیت رزروها"})}),(0,e.jsx)(g.Wu,{children:(0,e.jsx)(j.at,{children:(0,e.jsx)(i.uf,{width:"100%",height:300,children:(0,e.jsxs)(i.rW,{children:[(0,e.jsx)(i.Fq,{data:u,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,innerRadius:70,paddingAngle:5,fill:"#8884d8",dataKey:"value",stroke:"hsl(var(--background))",strokeWidth:2,children:u.map((a,b)=>(0,e.jsx)(i.fh,{fill:a.fill},`cell-${b}`))}),(0,e.jsx)(i.m_,{content:(0,e.jsx)(({active:a,payload:b})=>{if(a&&b&&b.length){let a=b[0].payload;return(0,e.jsx)("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:(0,e.jsx)("p",{className:"font-medium",children:`${a.name}: ${(0,k.formatNumber)(a.value)} (${(0,k.formatNumber)(100*b[0].percent,{maximumFractionDigits:0})}٪)`})})}return null},{})}),(0,e.jsx)(i.s$,{verticalAlign:"top",align:"right"})]})})})})]}),(0,e.jsxs)(g.Zp,{className:"transition hover:-translate-y-0.5 hover:shadow-lg shadow-card md:col-span-2",children:[(0,e.jsx)(g.aR,{children:(0,e.jsx)(g.ZB,{children:"محبوب‌ترین خدمات"})}),(0,e.jsx)(g.Wu,{children:(0,e.jsx)(j.at,{children:(0,e.jsx)(i.uf,{width:"100%",height:300,children:(0,e.jsxs)(i.Es,{data:w,children:[(0,e.jsx)(i.dC,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),(0,e.jsx)(i.WX,{tick:{textAnchor:"end",fill:"hsl(var(--muted-foreground))"},dataKey:"name",axisLine:!1,tickLine:!1}),(0,e.jsx)(i.h8,{tick:{textAnchor:"end",fill:"hsl(var(--muted-foreground))"},tickFormatter:a=>(0,k.formatNumber)(a),axisLine:!1,tickLine:!1}),(0,e.jsx)(i.m_,{content:(0,e.jsx)(x,{}),cursor:{fill:"hsl(var(--muted))"}}),(0,e.jsx)(i.s$,{verticalAlign:"top",align:"right"}),(0,e.jsx)(i.yP,{dataKey:"count",fill:"hsl(var(--secondary))",name:"تعداد رزرو",radius:[8,8,0,0]})]})})})})]})]})]})})};d()}catch(a){d(a)}})},78894:a=>{a.exports=require("lodash/isEqual")},82015:a=>{a.exports=require("react")},84106:a=>{a.exports=require("lodash/get")},85106:a=>{a.exports=require("lodash/min")},89947:a=>{a.exports=require("lodash/omit")},90030:a=>{a.exports=require("lodash/some")},90599:a=>{a.exports=require("lodash/minBy")},91651:a=>{a.exports=require("tiny-invariant")},92654:a=>{a.exports=require("lodash/last")},95009:a=>{a.exports=require("lodash/isNil")},96186:a=>{a.exports=require("lodash/uniqBy")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[611,157,952,410],()=>b(b.s=48783));module.exports=c})();